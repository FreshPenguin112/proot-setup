# Install Fex

# Setup RootFS

wget https://raw.githubusercontent.com/FEX-Emu/RootFS/main/unbreak_chroot.sh
wget https://raw.githubusercontent.com/FEX-Emu/RootFS/main/break_chroot.sh
chmod +x *.sh

# Enter Chroot
./unbreak_chroot.sh

# Fix Chroot
echo "nameserver 8.8.8.8" > /etc/resolv.conf
echo "127.0.0.1 localhost" > /etc/hosts

 # Needed
dpkg --add-architecture i386 
apt update && apt upgrade -y
apt install pulseaudio wget
apt install libgl1:i386 libgl1 libglx-mesa0:i386 libglx-mesa0 libgl1-mesa-dri:i386 libgl1-mesa-dri libgl1-mesa-glx:i386 libgl1-mesa-glx

libvulkan1:i386 libvulkan1

# Exit Chroot
exit

# Making the squashfs image
mksquashfs . Ubuntu-22.04.sqsh -comp zstd

# Fix Fex-emu

sudo apt install curl software-properties-common

# Extracting the squashfs
mkdir ~/.fex-emu/RootFS/
unsquashfs -f -d ~/.fex-emu/RootFS/Ubuntu/ /sdcard/Ubuntu-22.04.sqsh

FEXConfig

# Fex shortcut

alias fexbash="FEXBash"
alias fexcfg="FEXConfig"

